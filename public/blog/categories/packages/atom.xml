<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: packages | pfigue]]></title>
  <link href="http://pfigue.github.com/blog/categories/packages/atom.xml" rel="self"/>
  <link href="http://pfigue.github.com/"/>
  <updated>2015-06-18T15:24:31+02:00</updated>
  <id>http://pfigue.github.com/</id>
  <author>
    <name><![CDATA[pfigue]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Creating a new profile for Lintian]]></title>
    <link href="http://pfigue.github.com/blog/2014/02/04/creating-a-new-profile-for-lintian/"/>
    <updated>2014-02-04T09:56:00+01:00</updated>
    <id>http://pfigue.github.com/blog/2014/02/04/creating-a-new-profile-for-lintian</id>
    <content type="html"><![CDATA[<p>Lintian is a tool to check the format of Debian Packages.</p>

<p>It is useful when you are building your own packages, to check if they are properly built before testing them by actually installing them (for example, <a href="http://pfigue.github.io/blog/2014/01/25/using-vagrant-with-lxc-linux-containers/">through Vagrant into fresh containers</a>).</p>

<p>It can use different profiles, with different checks. The default profile is <strong>debian/main</strong>, which is useful if you pretend to package a program for the official Debian repositories.</p>

<p>After installing <strong>Lintian</strong> with <code>sudo apt-get install lintian</code> in Ubuntu 12.04, I have a file <code>/usr/share/lintian/profiles/debian/main.profile</code>. That is the definition of the <em>debian/main</em> profile (or just <em>debian</em>).</p>

<p>Lintian looks for profiles in this order,</p>

<ul>
<li> first in the user&rsquo;s domain <code>$HOME/.lintian/profiles/</code></li>
<li> then in system&rsquo;s domain <code>/etc/lintian/profiles</code></li>
<li> and finally in <code>/ur/share/lintian/profiles</code>.</li>
</ul>


<p>So, what I did is creating a new profile, (filename ended in <em>.profile</em>):</p>

<pre><code>$ mkdir -p /home/pfigue/.lintian/acme_gmbh/my_cute_profile/
$ vim /home/pfigue/.lintian/acme_gmbh/my_cute_profile/main.profile
</code></pre>

<p>There, the content of the profile file in my case is:</p>

<pre><code>Profile: acme_gmbh/main
Extends: debian/main
Disable-Tags: dir-or-file-in-opt
</code></pre>

<p>Which actually inherits all the rules from debian/main, and disables the check to avoid installation in <code>/opt/</code> (dir-or-file-in-opt). That path is reserved for private software, not for Debian software, that&rsquo;s the reason why the Debian profile checks nothing is installed there.</p>

<p>Once the new profile is in place, you can check it with:</p>

<pre><code>$ lintian --profile acme_gmbh  /tmp/testapp_0.45_amd64.deb
</code></pre>

<p>Per default the profile <em>acme_gmbh</em> is an alias for <em>acme_gmbh/main</em>.</p>

<p>References:</p>

<ul>
<li> <a href="http://lintian.debian.org/manual/section-2.5.html">Lintian User&rsquo;s Manual: Vendor Profiles</a></li>
<li> <a href="http://pfigue.github.io/blog/2014/01/25/using-vagrant-with-lxc-linux-containers/">Using Vagrant with LXC Linux Containers</a></li>
</ul>

]]></content>
  </entry>
  
</feed>
